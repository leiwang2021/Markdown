# CSAPP

## 第一章　计算机系统漫游

### 1.1 信息就是位+上下文

- 源程序是由值0和1组成的位序列，字节序列
- 只由ASCII字符构成的文件称为文本文件，所有其他文件都称为二进制文件

### 1.2 程序被其他程序翻译成不同的格式

- gcc -o hello  hello.c
- 编译系统
  - 预处理器(cpp) 读取系统头文件插入到程序文本中，得到修改了的源程序 hello.i

  - 编译器(ccl)将文本文件hello.i 翻译成hello.s  包含一个汇编语言程序,包含函数main的定义

  - 汇编器(as)将hello.s翻译成机器语言指令，得到可重定位目标程序的二进制文件hello.o

  - 链接器(ld)合并hello.o和printf函数的printf.o目标文件，得到可执行目标文件hello,可被加载到内存中，由系统执行

    ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-04 16-04-24.png)

### 1.3 编译系统

- 优化程序性能
- 理解链接时出现的错误
- 避免安全漏洞，缓冲区溢出错误是造成大多数网络安全漏洞的主要原因

### 1.4 处理器读取并解释存储在内存中的指令

- 系统的硬件组成
  - 总线：总线被设计成传送定长的字节块
  - I/O设备
  - 主存，临时存储设备，用于存放程序和程序处理的数据，DRAM
  - 处理器，执行存储在主存中指令的引擎
- 运行hello程序
  - 代码和数据从磁盘复制到主存，再从主存复制到寄存器，再从寄存器文件中复制到显示设备

### 1.5　高速缓存

- 高速缓存存储器存放经常访问的数据，提高访问速度　　SRAM

- 在处理器和主存之间插入一个高速缓存可以提高速度

  ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-04 16-05-12.png)

### 1.6 存储设备层次结构

- 上一层的存储器作为低一层存储器的高速缓存

- 可以利用对整个存储器层次结构的理解提高程序性能

  ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-04 16-05-36.png)

### 1.7 操作系统管理软件

- 所有应用程序对硬件的操作尝试都必须通过操作系统

  ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-04 16-06-02.png)

- 操作系统两个基本功能
  - 防止硬件被失控的应用程序滥用
  - 向应用程序提供简单一致的机制来控制复杂的硬件设备

- 操作系统通过基本的抽象概念(进程、虚拟内存和文件)实现
  - 文件是对I/O设备的抽象表示
  - 虚拟内存是对主存和磁盘I/O设备的抽象表示
  - 进程是对处理器、主存和I/O设备的抽象表示

- 进程

  - 进程是操作系统对一个正在运行的程序的一种抽象
  - 并发运行: 一个进程的指令和另一个进程的指令是交错执行的
  - 上下文:跟踪进程运行所需的所有状态信息
  - 上下文切换: 切换进程
  - 从一个进程到另一个进程的转换是操作系统内核管理的，内核是操作系统代码常驻主存的部分，内核是系统管理全部进程所用代码和数据结构的集合

- 线程

  - 一个进程实际上可以由多个线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和数据

- 虚拟内存

  - 为每个进程提供一个假象，即每个进程都独占地使用主存

  - 每个进程看到的内存都是一样的，称为虚拟地址空间

  - 程序代码和数据

  - 堆: 在运行时可动态扩展和收缩

  - 共享库: 存放像C标准库的代码和数据

  - 栈: 编译器用它来实现函数调用

  - 基本思想是把一个进程虚拟内存的内容存储在磁盘上，用主存作为磁盘的高速缓存

    ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-04 16-00-57.png)

- 文件
  - 文件就是字节序列，每个I/O设备都可看成文件
  - 系统中的所有输入输出都是通过Unix I/O的系统函数调用读写文件来实现的

### 1.8 系统之间利用网络通信

- 系统从主存复制一串字节到网络适配器，数据流过网络到达另一台机器

### 1.9

- Amdahl定律，想要显著加速整个系统，必须提升全系统中相当大的部分的速度

- 并发: 一个同时具有多个活动的系统

- 并行: 用并发来使一个系统运行得更快

- 线程级并发

  - 多处理器系统

  - 超线程: 同时多线程，允许一个CPU执行多个控制流的技术

    ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-04 16-22-44.png)

- 指令级并发

  - 同时执行多条指令
  - 若处理器可以达到比一个周期一条指令更快的执行速率，就称为超标量处理器

- 单指令、多数据并发

  - 一条指令可以产生多个可以并行执行的操作

    ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-04 16-35-39.png)

## 第2章　信息的表示和处理

