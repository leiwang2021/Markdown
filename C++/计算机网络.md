# 计算机网络

## 第1章 概述

### 1.1

### 1.2

- 第一个分组交换网ARPANET
- 1983年TCP/IP协议成为ARPANET的标准协议，互联网的诞生时间
- internet(互连网)与Internet(互联网)
- 三级结构的互联网
- 多层次ISP结构的互联网
- WWW(World Wide Web)
- RFC文档

### 1.3 互联网的组成

- 边缘部分:主机
- 核心部分: 路由器以及网络
- C/S模式
- P2P模式
- 路由器实现分组交换的关键构件，路由器暂时存储的是一个个短分组，短分组是暂时存在路由器的内存中的
- 电路交换、报文交换、分组交换
- 网络带宽表示在单位时间内网络中的某信道所能通过的最高数据率
- 发送时延、传播时延、处理时延、排队时延
- 时延带宽积、往返时间RTT
- 利用率

### 1.7 计算机网络体系结构

- OSI/RM   开放系统互连基本参考模型

- 网络协议:  语法、语义、同步

- 具有五层协议的体系结构

  ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-05 16-46-33.png)

- 应用层交互的数据单元称为报文

- 运输层：　负责为两台主机中进程之间的通信提供通用的数据传输服务

  - 传输控制协议TCP 提供面向连接的、可靠的数据传输服务，数据传输的单位是**报文段**
  - 用户数据报协议UDP, 提供无连接的、尽最大努力的数据传输服务(不保证数据传输的可靠性)，数据传输的单位是**用户数据报**

- 网络层:

  - 负责为分组交换网上的不同主机提供通信服务，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送，分组也称为**IP数据报**
  - 选择合适的路由
  - 无连接的网际协议IP和许多种路由选择协议

- 数据链路层

  - 将网络层交下来的IP数据报组装成帧，包含数据和控制信息

- 物理层

  ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-05 17-01-00.png)



## 第二章　物理层

### 2.1 物理层的基本概念

### 2.2 数据通信的基础知识

![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-05 17-07-26.png)

### 2.3 物理层下面的传输媒体

- 双绞线
- 同轴电缆
- 光缆

### 2.4 信道复用技术

- 频分复用
- 时分复用
- 统计时分复用
- 波分复用
- 码分复用

### 2.5 数字传输系统

### 2.6 宽带接入技术

- ADSL
- HFC
- FTTH



## 第三章　数据链路层

- 点对点信道
- 广播信道

### 3.1 使用点对点信道的数据链路层



- 封装成帧

  - 帧定界可以使用帧定界符
  - SOH和EOT都是控制字符的名称，十六进制编码为01和04
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-05 17-28-40.png)

- 透明传输

  - 所传输的数据中任何8比特组合一定不允许和控制字符一样

  - 发送端的数据链路层在数据中出现控制字符的前面插入一个转义字符ESC,十六进制编码为1B

    ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-05 17-34-06.png)

- 差错控制

  - 广泛使用循环冗余校验CRC

### 3.2 点对点协议

- 能实现可靠传输的高级数据链路控制HDLC

- 对于点对点的链路，PPP协议是目前使用最广泛的数据链路层协议

- PPP协议的特点

  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-07 17-25-33.png)

  - **用户计算机和ISP进行通信时所使用的数据链路层协议**
  - 满足的需求
    - 简单
    - 封装成帧
    - 透明性
    - 支持多种网络层协议
    - 支持多种类型链路
    - 差错检测
    - 检测连接状态
    - 最大传送单元
    - 网络层地址协商
    - 数据压缩协商
  - PPP协议不需要进行纠错，不需要设置序号，不需要进行流量控制，不支持多点线路，只支持点对点，只支持全双工链路

- PPP协议的组成

  - 一个将IP数据报封装到串行链路的方法
  - 一个用来建立、配置和测试数据链路链接的链路控制协议LCP
  - 一套网络控制协议NCP

- PPP协议的帧格式

  - 字节填充
    - 异步传输时，利用转义字符 0x7D进行字节填充
  - 零比特填充
    - 同步传输时，采用零比特填充实现透明传输
  - 

  ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-06 16-15-55.png)



  - PPP协议的工作状态
    - 用户拨号接入ISP后，用户个人电脑向ISP发送一系列的链路控制协议LCP分组(封装成多个PPP帧)，以便建立LCP连接
    - 网络控制协议NCP给新接入的用户个人电脑分配一个临时的IP地址
    - 用户通信完毕后，NCP释放网络层连接，LCP释放数据链路层连接
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-06 16-31-27.png)



### 3.3 使用广播信道的数据链路层

- 局域网的数据链路层
  - 星形网
  - 环形网
  - 总线网: 以太网最有名
  - 静态划分信道: 复用的方式　　　　　
  - 动态媒体接入控制
    - 随机接入:  以太网，需要有解决碰撞的网络协议
    - 受控接入

- 以太网的两个标准
  - IEEE 802.3  (快消失)
    - IEEE 902将局域网的数据链路层分成逻辑链路控制LLC子层和媒体接入控制MAC子层
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-06 16-40-56.png)
  - DIX Ethernet V2　(应用最多)　　　

- 适配器的作用
  - 适配器(网卡)与电缆或双绞线以串行传输方式进行，与I/O总线以并行方式传输
  - 适配器的功能包含了数据链路层和物理层
  - 计算机的硬件地址在适配器的ROM中，IP地址在计算机的存储器中
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-06 16-47-52.png)

- CSMA/CD协议
  - 以太网采用无连接的工作方式，不进行编号，也不要求对方发回确认，采用CSMA/CD载波监听多点接入/碰撞检测协议来解决冲突
  - 以太网发送的数据都使用曼彻斯特编码的信号
  - CSMA/CD协议的要点
    - 总线型网络，多点接入
    - 检测信道
    - 边发送边监听，使用CSMA/CD协议的以太网只能进行半双工通信
    - 以太网使用截断二进制指数退避算法来确定碰撞后重传的时机
    - 适配器每发送一个新的帧，就要执行一次CSMA/CD算法
    - 最短帧长64字节，凡长度小于64字节的帧都是由于冲突而异常终止的无效帧
    - 强化碰撞
    - 帧间最小间隔
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-06 17-03-23.png)

- 使用集线器的星形拓扑
  - 从总线型演进到星型
  - 集线器的特点
    - 使用集线器的局域网在物理上是星形网，在逻辑上是总线网，适配器仍执行CSMA/CD协议
    - 一个集线器有许多接口
    - 集线器工作在物理层，每个接口仅仅简单转发比特，不进行碰撞检测

- 以太网的信道利用率

- 以太网的MAC层

  - MAC层的硬件地址

    - 48位的全球地址，固化在适配器的ROM中的地址
    - 三种MAC帧: 单播　广播　多播

  - MAC帧的格式

  - 首部没有帧长度，依据曼彻斯特编码确定结束位置

  - 在以太网上传送数据时是以帧为单位传送的，各帧之间必须有一定间隙，因此，接收端只要找到帧开始定界符，其后续到达的比特流就都属于同一个MAC帧，以太网不需要帧结束定界符

  - 对于检查出的无效MAC帧就简单地丢弃，以太网不负责重传丢丢弃的帧

  - 目前广泛使用的局域网只有以太网，LLC帧失去了意义，流行的都是以太网V2的MAC帧，但常常也称为IEEE 802.3标准的MAC帧

    ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-07 16-43-35.png)

### 3.4 扩展的以太网

- 在物理层扩展以太网
  - 目前扩展主机和集线器之间的距离的一种简单方法是使用光纤
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-07 16-57-42.png)

- 在数据链路层扩展以太网
  - 更常用的方法
  - 网桥对收到的帧根据其MAC帧的目的地址进行转发和过滤，以太网交换机很快淘汰了网桥和集线器，工作在数据链路层
  - 以太网交换机实质上是一个多接口的网桥，以太网交换机每个接口都直接与一个单台主机或另一个以太网交换机相连
  - 以太网交换机具有自学习功能
  - 总线以太网使用CSMA/CD协议，以半双工方式工作，但以太网交换机不使用共享总线，没有碰撞问题，因此不使用CSMA/CD协议，而是以全双工方式工作，但是帧结构仍未改变
- 虚拟局域网
  - 利用以太网交换机可以方便地实现虚拟局域网VLAN
  - 虚拟局域网协议允许在以太网的帧格式中插入一个4字节的标识符，称为VLAN标记，用来表明发送该帧的计算机属于哪一个虚拟局域网
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-07 17-15-29.png)

![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-07 17-15-56.png)

### 3.5 高速以太网

- 100BASE-T以太网
- 吉比特以太网
- 10吉比特以太网和更快的以太网
- 使用以太网进行宽带接入
  - 把PPP协议中的PPP帧封装到以太网中来传输，PPPoE,是为宽带上网的主机使用的链路层协议



## 第四章　网络层

### 4.1 网络层提供的两种服务

![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-09 16-36-52.png)

### 4.2 网际协议IP

- 与IP协议配套使用的三个协议
  - 地址解析协议ARP
  - 网际控制报文协议ICMP
  - 网际组管理协议IGMP

![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-09 16-41-00.png)

- 虚拟互连网络
  - 将网络互相连接起来需要使用一些中间设备
    - 物理层使用的　转发器
    - 数据链路层使用的　网桥或桥接器
    - 网络层使用的　路由器
    - 网络层以上使用的　网关，用网关连接两个不兼容的系统需要在高层进行协议的转换
  - 互联网可以由多种异构网络互连组成
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-09 16-48-41.png)

- 分类的IP地址
  - IP地址及其表示方法
    - IP地址的编址方法
      - 分类的IP地址
      - 子网的划分
      - 构成超网(无分类)，近年来已广泛使用

  - 分类的IP地址

  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-09 16-52-53.png)

  - A,B,C类地址都是单播地址，D类地址用于多播

  - 常采用点分十进制记法

  - 常用三种类别的IP地址

    - A类地址，可指派的网络号是2^7-2    IP地址的全0是保留地址，即本网络；网络号127(即01111111)保留作为本地软件环回测试本主机的进程之间的通信之用。全0号的主机字段表示该IP地址是本主机所链接到的单个网络地址，全1的主机号字段表示该网络上所有的主机
    - B类地址，128.0.0.0是不指派的，可以指派的最小网络地址是128.1.0.0，可指派的网络数为2^14-1
    - C类地址，C类地址192.0.0.0也是不指派的，可以指派的最小网络地址是192.0.1.0,可指派的总网络数是2^21-1
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-09 17-12-59.png)

    - 路由器仅根据目的主机所连接的网络号来转发分组
    - IP地址是标识一台主机和一条链路的接口，一个路由器至少应当连接到两个网络，应至少有两个不同的IP地址
    - 用网桥互连的网段仍然是一个局域网，只能有一个网络号

- IP地址与硬件地址

  ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 16-43-51.png)

  -  IP层抽象的互联网屏蔽了下层这些很复杂的细节，只要我们在网络层上讨论问题，就能够使用统一的、抽象的IP地址研究主机和主机或路由器之间的通信

- 地址解析协议ARP

  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 16-55-25.png)
  - RARP协议，根据硬件地址找出其IP地址，现在的DHCP协议已经包含了RARP协议的功能
  - ARP协议在主机ARP高速缓存中存放一个从IP地址到硬件地址的映射表。这个映射表经常动态更新
  - 每一台主机都设有一个ARP高速缓存，里面有本局域网上的各主机和路由器的IP地址到硬件地址的映射表
  - ARP对保存在高速缓存中的每一个映射地址项目都设置生存时间，凡超过生存时间的项目就从高速缓存中删除。
  - ARP是解决同一个局域网上的主机或路由器的IP地址和硬件地址的映射问题
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 17-04-55.png)
  - ARP的四种典型情况
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 17-07-11.png)

- IP数据报的格式
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 17-13-14.png)

  - IP数据报首部的固定部分中的各字段

    - 版本，占4位，IP协议的版本

    - 首部长度，占4位，单位是32位字，首部长度的最小值是5个32位字,最大值是15个32位字

    - 区分服务，占8位

    - 总长度，指首部和数据之和的长度，单位为字节，总长度字段为16位，数据报的最大长度为65535字节，数据链路层协议规定了数据帧中的数据字段的最大长度，称为最大传送单元MTU,以太网规定MTU是1500字节，IP协议规定，在互联网中的所有主机和路由器，必须能够接受长度不超过576字节的数据报，在进行分片时，总长度字段是指分片后的每一个分片的首部长度与该分片的数据长度的总和

    - 标识，占16位，当数据报由于长度超过网络的MTU而必须分片时，这个标识字段的值就被复制到所有的数据报片的标识字段中

    - 标志，占3位，MF最低位=1表示后面还有分片，DF中间位=0时才允许分片

    - 片偏移，占13位，较长的分组在分片后，某片在原分组中的相对位置，以8字节为偏移单位

      ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 17-38-23.png)

    - 生存时间TTL，占8位，每经过一个路由器时，就把TTL减去数据报在路由器所消耗的一段时间，当TTL值减为0时，就丢弃这个数据报，单位是跳数数据报能在互联网经过的路由器的最大数值为255,若TTL值为1,表示只能在本局域网中传送

    - 协议，占8位。此数据报携带的数据是使用何种协议　

    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 17-44-11.png)

    - 首部校验和，16位，只校验数据报的首部

    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-10 17-46-17.png)

    - 源地址
    - 目的地址
    - IP数据报首部的可变部分：增加数据报的功能，IPV6把数据报的首部长度做成固定的

- IP转发分组的流程

  - 在互联网上转发分组时，是从一个路由器转发到下一个路由器
  - 在路由表中，每一条路由最主要的是以下两个信息　(目的网络地址，下一跳地址)
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-11 16-25-50.png)

  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-11 16-29-45.png)

### 4.3 划分子网和构造超网

- 划分子网

  - 从两级IP地址到三级IP地址

    - IP地址的设计不合理性
    - IP地址::={<网络号>,<子网号>,<主机号>}
    - 划分子网只是把IP地址的主机号这部分进行再划分，而不改变IP地址原来的网络号

  - 子网掩码

    - 从IP数据的首部无法看出源主机或目的主机所连接的网络是否进行了子网划分

    - 使用子网掩码

    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-11 17-00-09.png)

      - 路由器把三级IP地址的子网掩码和收到的数据报的目的IP地址逐位相与，得到子网的网络地址
      - 如果一个网络不划分子网，那么该网络的子网掩码就使用默认子网掩码，默认子网掩码中1的位置和IP地址中的网络号字段正好对应
      - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-11 17-15-41.png)

      - 路由器的路由表中的每一个项目。除了要给出目的网络地址外，还要给出该网络的子网掩码
      - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-11 17-27-20.png)

      - 子网数是根据子网号计算出来的，2^n种可能，再去掉全0和全1

- 使用子网时分组的转发

  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-11 17-32-53.png)

- 无分类编址CIDR(构造超网)
  - 网络前缀
    - 两级编址，但这是无分类的两级编址　　　IP地址::={<网络前缀>，<主机号>}
    - CIDR把网络前缀都相同的连续IP地址组成一个CIDR地址块
    - 地址掩码，1的个数是网络前缀的长度
    - 路由聚合，构成超网，利用CIDR地址块寻找目的网络
    - 可根据客户的需要分配适当大小的CIDR地址块
    - 网络前缀越短，其地址块所包含的地址数就越多
  - 最长前缀匹配
    - 应当从匹配结果中选择具有最长网络前缀的路由
  - 使用二叉线索查找路由表
    - 通常把无分类编址的路由表存放在一种层次的数据结构中，常用的是二叉线索



### 4.4 网际控制报文协议ICMP

- ICMP报文是装在IP数据报中，作为其中的数据部分
- ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-17 21-06-17.png)

- ICMP报文的种类

  - ICMP差错报告报文

    ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-17 21-14-15.png)

    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-17 21-17-19.png)

  - ICMP询问报文

  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-17 21-11-32.png)

- ICMP的应用举例
  - ping使用了ICMP回送请求与回送回答报文，是应用层直接使用网络层ICMP的例子，没有通过运输层的TCP或UDP
  - traceroute用来跟踪一个分组从源点到终点的路径　tracert
  - traceroute  www.baidu.com
  - 当IP数据报中封装的是无法交付的运输层的UDP用户数据报时，目的主机要向源主机发送ICMP终点不可达差错报告报文

### 4.5 互联网的路由选择协议

- 基本概念

  - 理想的路由算法
  - 分层次的路由选择协议
    - 互联网采用的路由选择协议主要是自适应的(动态的)、分布式的
    - 自治系统是在单一技术管理下的一组路由器
    - 内部网关协议IGP,在一个自治系统内部使用的路由选择协议　RIP和OSPF
    - 外部网关协议EGP,     BGP-4
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-18 16-30-20.png)

- 内部网关协议RIP

  - 路由信息协议，一种分布式的基于距离向量的路由选择协议
  - RIP允许一条路径最多只能包含15个路由器
  - RIP选择一条具有最少路由器的路由
  - 分布式路由选择协议，每一个路由器要不断和其他一些路由器交换路由信息
  - 仅和相邻路由器交换信息
  - 交换的是路由表
  - 按固定的时间间隔交换路由信息
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-18 16-38-40.png)

  - RIP协议让一个自治系统中的所有路由器都和自己的相邻路由器定期交换路由信息，并不断更新路由表，使得从每一个路由器到每一个目的网络的路由都是最短的
  - RIP协议的报文格式
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-18 16-46-01.png)

  - 存在的问题：　当网络出现故障时，要经过比较长时间才能将此信息传送到所有的路由器
  - 适合于规模较小的网络

- 内部网关协议OSPF

  - 开放最短路径优先
  - 使用分布式的链路状态协议
  - 向本自治系统中所有路由器发送信息
  - 发送的信息就是与本路由器相邻的所有路由器的链路状态
  - 只有链路状态发生变化时，才发送
  - 所有的路由器最终都能建立一个链路状态数据库，知道全网的拓扑结构，构造出自己的路由表
  - OSPF将一个自治系统再划分为若干个更小的范围，叫做区域
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-18 17-05-41.png)

  - OSPF不用UDP而是直接使用IP数据报传送
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-18 17-08-00.png)

  - 五种分组类型
    - 类型1,问候分组
    - 类型2,数据库描述分组
    - 类型3,链路状态请求分组
    - 链路状态更新分组
    - 链路状态确认分组

- 外部网关协议BGP

  - BGP只能是力求一条能够到达目的网络且比较好的路由，而并非要寻址一条最佳路由
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-18 17-28-20.png)

  - OPEN报文
  - UPDATE报文
  - KEEPALIVE报文
  - NOTIFICATION报文

- 路由器的构成

  - 路由器的结构
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-18 17-32-10.png)


### 4.6 IPv6

- IPv6的基本首部

  - 支持无连接的传送，将协议数据单元PDU称为分组

  - 主要变化

    - 128位
    - 首部长度是固定的
    - 允许协议继续扩充
    - 支持即插即用(即自动配置)，不需要DHCP
    - 首部8字节对齐
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-19 18-40-37.png)

    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-19 18-43-29.png)

    - 通信量类，区分不同的IPv6数据报的类别或优先级
    - 流标号　流就是互联网上从特定源点到特定终点的一系列数据报，所有属于同一个流的数据报都具有同样的流标号
    - 下一个首部，　当IPv6数据报没有扩展首部时，它的作用和IPv4的协议字段一样，当出现扩展首部时，标识后面第一个扩展首部的类型　
    - 六种扩展首部: 逐跳选项、路由选择、分片、鉴别、封装安全有效载荷、目的站选项

- IPv6的地址

  - 单播
  - 多播
  - 任播(只交付一个)
  - IPV6使用冒号十六进制法
  - 冒号十六进制记法可以结合点分十进制记法
  - ::表示省略的0
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-19 19-11-39.png)

- 从IPv4向IPv6过渡

  - 双协议栈
    - 装有双协议栈:  IPv4和IPv6
    - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-19 19-17-31.png)

  

  - 隧道技术
    - 把IPv6数据报封装成为IPv4
    - IPv4首部的协议字段设置为41,即IPv6数据报

- ICMPv6

  - IPV6也不保证数据报的可靠交付
  - ARP和IGMP的功能已被合并到ICMPv6中
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-19 19-22-22.png)

### 4.7 IP多播

- 在多播数据报的目的地址写入的是多播组的标志符，设法将多播组的主机的IP地址与多播组的标志符关联起来
- 用每一个D类地址标识一个多播组
- 多播数据报使用D类IP地址作为目的地址，并且首部的协议字段为2,表明使用IGMP
- 多播地址只能用于目的地址，而不能用于源地址，对多播数据报不产生ICMP差错报文
- 在局域网上进行硬件多播
  - ![](/home/leiwang/Markdown/C++/picture/Screenshot from 2019-09-19 19-33-37.png)

- 网际组管理协议IGMP和多播路由选择协议
  - IP多播需要两种协议
    - IGMP协议让连接在本地局域网上的多播路由器知道本局域网上是否有主机参加或退出了某个多播组
    - 多播路由选择协议
  - IGMP
    - IGMP使用IP数据报传递其报文

### 4.8 虚拟专用网VPN和网络地址转换NAT